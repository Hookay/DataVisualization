<!--Exercise 32: Using the D3 documentation as a reference, extend the example to include additional ‘forces’ to make the visualization more interesting and interactive. 

author: Reka Hegedus
-->


<html>

  <head>

      <script src='https://d3js.org/d3.v7.min.js'></script>
      
      <div id="content">
        <svg width="700" height="200">
          <g transform="translate(50, 100)"></g>
        </svg>
      </div>

  </head>

      <body>

        <script>
<!----------------------------------variables----------------------------------------->
          var width = 600, height = 600; 

          var xScale = d3.scaleLinear().domain([0, 1]).range([0, 600]);
          <!--inline array-->
          var numNodes = 100; 

          <!--create nodes with varying radious-->
          var nodes = d3.range(numNodes).map(function(d, i) {
                                return {<!--math.random inbetween 0-1-->
                                  radius: Math.random() * 25,
                                  value: Math.random()}});
                                  
<!----------------------------------add forces----------------------------------------->  
      
      <!--use simulation on nodes-->
      var simulation = d3.forceSimulation(nodes) 
             <!--apply body force strength-->
            .force('charge', d3.forceManyBody().strength(5)) 
            .force('x', d3.forceX().x(function(d) {return xScale(d.value);}))
            .force('y', d3.forceY().y(function(d) { return 0;}))
            <!--tell where the center of mass should be-->
            //.force('center', d3.forceCenter(width / 2, height / 2)) 
            <!--collide the circles mind their radious-->
            .force('collision', d3.forceCollide().radius(function(d) { 
                return d.radius 
            })) 
            <!--call function to append circles with attributes-->
            .on('tick', ticked);                                   
                                  

  <!---------------------------------- tick function-------------------------------------> 
      function ticked() { 
      
       <!--uselect the created svg-->
        var u = d3.select('svg g') 
           <!--select circle objects-->
          .selectAll('circle') 
           <!--Add listener for the mouseover event -->
          .on("mouseover", onMouseOver) 
          
          <!--use nodes as data-->
          .data(nodes) 
          <!--join appends entering elements and removes exiting elements to match the data-->
          .join('circle')
          <!--colour it->
          .attr('fill', function(d,i){
          <!--use random numbers to create colours->
           var u =  800000+Math.floor(Math.max(Math.random(),0.1) * 900)*i;
           <!--use hex code->
           return "#"+ u.toString();}) 
          <!--add radious->
          .attr('r', function(d) { return d.radius}) 
          <!--x position->
          .attr('cx', function(d) { return d.x}) 
          <!--y position->
          .attr('cy', function(d) { return d.y}) 
      } 
          
         function onMouseOver(d, i) {
           <!--get the object which the mouse over attached to and colour it blue-->
           d3.select(this).style("fill","blue")

          }

   
          <!--log data in cnsole-->
        console.log('ready..');   
          
          
     </script>
      
 </body>
