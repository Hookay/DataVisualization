<!--Exercise 28: For the example above, modify the code so that each sphere is displayed as a different color. 

author: Reka Hegedus
-->

<html>

      <head>


      <script src='https://d3js.org/d3.v7.min.js'></script>


      </head>
<body>


  <script>
      
      
<!----------------------------------variables----------------------------------------->
      var width = 400, height = 400; 
      <!--generate some random numbers for colour-->
      var p=Math.floor(Math.random()* 9000);
      <!--generate some random data-->
      var numNodes = 100; 
      <!--create nodes with varying radious-->
      var nodes = d3.range(numNodes).map(function(d) { 
         <!--random returns numbers between 0-1 so has to multiply->
        return {radius: Math.random() * 25} 
      }) 

<!----------------------------------setup svg ----------------------------------------->      
      d3.select('body').append('svg').attr('width',width).attr('height',height); 




<!----------------------------------add forces----------------------------------------->  
       
      <!--use simulation on nodes-->
      var simulation = d3.forceSimulation(nodes) 
             <!--apply body force strength-->
            .force('charge', d3.forceManyBody().strength(5)) 
            <!--tell where the center of mass should be-->
            .force('center', d3.forceCenter(width / 2, height / 2)) 
            <!--collide the circles mind their radious-->
            .force('collision', d3.forceCollide().radius(function(d){ 
               return d.radius 
            }))
            <!--call function to append circles with attributes-->
            .on('tick', function(){
            <!--send in colour value-->      
            return ticked(p);}); 
            
            
<!---------------------------------- tick function-------------------------------------> 
      function ticked(p) { 
        
       <!--uselect the created svg-->
        var u = d3.select('svg') 
           <!--select circle objects-->
          .selectAll('circle') 
          <!--use nodes as data-->
          .data(nodes) 
          <!--join appends entering elements and removes exiting elements to match the data-->
          .join('circle') 
          <!--colour it->
           
          .attr('fill', function(d,i){
          <!--use random numbers to create colours->
          
           var u = 100000+p*i
           <!--use hex code->
           return "#"+ u.toString();
          }) 
          <!--add radious->
          .attr('r', function(d) { 
            return d.radius 
          }) 
          <!--x position->
          .attr('cx', function(d) { 
            return d.x 
          }) 
          <!--y position->
          .attr('cy', function(d) { 
            return d.y 
          }) 
      } 
      <!--log console-->
      console.log('ready..'); 


 </script>
 
 </body>
</html>
