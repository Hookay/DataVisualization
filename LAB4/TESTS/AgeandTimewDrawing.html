<html>
  <head>
     <script src='https://d3js.org/d3.v7.min.js'></script>
     <!-- Create a box where the graph will take place and adjust to screen -->
     <svg viewBox="0 0 1200 700"><g id=women
transform="scale(0.35,0.35) translate(-70,70) " fill="#3b3939" stroke="#3b3939"stroke-width="6">
	<path d="M-95,745.2c1.7-1.1,3.4-2.7,5.7-1.4c0.5,0.3,1.2,0.6,0.9,1.4c-0.2,0.5-0.7,0.8-1.2,0.7c-1.6-0.3-2.6,0.3-3.4,1.6
		c-0.4,0.7-1.2,0.8-2,0.7C-95,747.2-95,746.2-95,745.2z"/>
	<path d="M802,1104.5c-12.6,0-25.2,0.1-37.8,0c-10.1-0.1-20.1-1-30.2-0.8c-1.6,0-3.3-0.4-4.9-0.6c-8-1.4-16.1-0.9-24.1-0.6
		c-12.7,0.4-24.9-1.9-36.9-5.2c-7.6-2.1-14.9-5.5-21.5-10c-1.8-1.2-3.6-2.3-5.5-3.4c-7.6-4.4-14.1-10.1-19.4-17.1
		c-1.4-1.8-3-3.4-4.8-4.8c-5.5-4.2-10.5-9.1-15.5-13.8c-7.1-6.8-15.3-12.3-22.8-18.6c-7.3-6.2-15.7-11-21.8-18.5
		c-3.6-4.4-7.4-8.5-11-13c-4.6-5.8-9.6-11.3-14.3-17.1c-7-8.6-11.8-18.4-16.5-28.3c-1.8-3.8-3.7-7.4-6.2-10.8
		c-6.3-8.8-11.2-18.5-15.4-28.5c-0.7-1.6-1.1-3.3-1.3-5.1c-0.3-2.4-0.6-4.7-1.5-7c-0.5-1.4-0.7-2.9-0.7-4.5c0-1.8-0.1-3.5-0.5-5.2
		c-0.3-1.2-0.4-2.5-0.2-3.7c0.7-5.1,1-10.3,2.5-15.2c0.2-0.7,0.4-1.5,0.8-2.1c4-6.3,6.1-13.5,10.2-19.8c3.3-4.9,7.1-8.9,12.9-11.1
		c5-1.9,9.7-4.8,14.5-7.3c1.5-0.8,2.9-1.5,4.5-1.9c3.7-0.9,7.2-2.4,10.8-3.4c7.6-2,15.2-4.4,23.3-4.2c7.1,0.2,14.1-0.2,21.2,0.1
		c8.5,0.4,17,1.6,25.3,4.1c5.1,1.5,10.3,1.6,15.6,0.3c5-1.2,6.7-3.5,7.1-8.7c0.7-7.4,2.1-14.8,2.2-22.4c0-1.4,0.1-2.8-0.1-4.1
		c-0.3-3.5-0.6-7,0.1-10.5c0.5-2.5,0.1-5-0.1-7.5c-0.6-7.8-0.5-15.6,0.7-23.3c0.9-6.1,0.6-12.3,0.4-18.5c-0.3-9.7-1.1-19.3-1.6-29
		c-0.3-6.3-1.6-12.5-1.6-18.8c0-2.6-0.9-5.2-1.5-7.8c-1-5.1-1.7-10.2-2.3-15.3c-0.7-5.2-1.9-10.4-3.6-15.4
		c-4-11.5-7.2-23.3-9.9-35.3c-1.3-5.8-3.2-11.4-4.2-17.2c-1.2-7.4-2.4-14.9-3.4-22.4c-0.7-5.2-2-10.4-3.2-15.5
		c-3.2-13.4-4.1-26.8-2.5-40.5c1.4-11.2,3.3-22.4,5.3-33.5c1.8-10.1,4.5-19.9,9.2-29c3.1-6,6.8-11.8,12.3-16.1
		c3.4-2.6,5.9-6.2,9.4-8.7c2.2-1.6,4.5-2.8,7.2-2.7c1.5,0,3.2-0.1,4.4-0.9c2.9-1.9,6.2-2.5,9.6-3.3c0.5-0.1,1-0.2,1.5-0.4
		c1.1-0.4,2.4-0.8,2.3-2.1c0-1.2-1.4-1.2-2.3-1.5c-5-1.7-10.2-2.6-15.2-4.5c-4.5-1.8-9.2-1.2-13.8-0.5c-11.3,1.9-21.4-1.9-31.4-6
		c-2.8-1.1-5.2-3-7.2-5.4c-1.3-1.5-2.9-2.8-4.5-4c-3.9-3-6.2-6.9-5.9-12c0.1-1.1,0.1-2.3,0-3.4c-0.7-10.5,3.5-19.7,8.4-28.6
		c1.6-3,4.6-5,6-8.2c0.6-1.4,1.4-2.7,2.1-4c4.7-9,9.7-17.9,15.8-26c3.6-4.8,7.2-9.6,11.4-14.1c1-1,2.3-1.6,3.3-2.5
		c1.7-1.6,1.6-3-0.2-4.3c-1.9-1.4-4.2-1.7-6.2-2.8c-3.3-1.8-6.7-3.5-10-5.3c-2.2-1.2-4.3-2.5-6.1-4.4c-1.6-1.7-3.3-3.5-5.3-4.9
		c-0.8-0.6-1.5-1.3-2-2.2c-1.9-3-3.8-6-5.7-8.9c-1.7-2.5-2.9-5.2-3.3-8.3c-0.4-3.1-2.1-5.9-2.4-9.1c-0.3-3.3-0.5-6.5,0-9.8
		c0.3-2.3,0.1-4.8,0.4-7.1c0.6-5.7,2.6-10.6,7-14.5c6.9-6.2,13.9-12.4,21.5-17.8c1.3-0.9,2.7-1.9,4.2-2.5c4.5-2,8-5.7,12.4-7.8
		c6.3-2.9,11.8-6.7,17-11.1c3.4-2.8,7.3-4.9,10.8-7.5c7.8-5.8,11.5-13.7,13.1-22.9c0.5-3,0.3-6,0.3-9c-0.1-6.1,0.5-12.3,0.7-18.4
		c0.2-6.7,2.6-12.8,4.9-18.9c3.5-9.3,10.2-15.8,18.9-20.1c7.9-3.9,15.4-8.6,22-14.6c5.1-4.7,10.9-8.1,16.7-11.6
		c4.7-2.8,9.9-4.3,15.3-5.3c9.2-1.7,18.4-3.2,27.4-5.3c10.7-2.4,21.5-4.2,32.2-6.2c6.2-1.2,12.4-2.2,18.6-3.3
		c9.5-1.6,19.1-1.7,28.6-0.2c7.2,1.2,14.2,3.4,20.1,8.1c5,4,8.3,9.3,11.1,15c0.6,1.2,0.5,2.5,0.5,3.7c0,1.4-0.1,2.8-0.1,4.2
		c0,4.4,1.1,5.3,5.5,4.8c5.4-0.6,10.7-1.2,16.2-0.5c8.9,1.1,16.6,4.5,23.2,10.7c4,3.8,8,7.7,11.5,12c5,6.1,7,13.2,7.3,21
		c0.3,8.6-1.3,17-2,25.5c-0.5,6.2-2.1,12.1-4.3,17.9c-0.5,1.3-0.9,2.7-1,4c-0.5,7.5-3.1,14.5-5.3,21.6c-0.2,0.6-0.3,1.3-0.7,1.8
		c-1.7,2.3-1.2,4.2,0.6,6.4c5.5,6.3,9.1,13.7,10.5,21.9c1.2,7,1.8,14.2,1,21.4c-0.5,5.1-1.8,10.1-1.9,15.3
		c-0.1,3.5-1.8,6.8-2.9,10.1c-1.8,5.4-3.5,10.8-5.3,16.1c-1.7,5-4.1,9.8-6.5,14.4c-3,5.8-5.5,11.8-9.7,17c-1.9,2.4-2.9,5.6-4.2,8.4
		c-0.9,1.9-2,3.4-3.9,4.4c-4.2,2.3-6.1,6-6.1,10.9c0.1,14-0.1,28,0.1,42c0.1,8,3.7,14.9,8.4,21c2.9,3.8,6.2,7.3,9.2,11
		c2.2,2.7,4.5,4,8.4,3.5c8.7-1.2,17.6-1,26.4-0.9c4.7,0.1,9.3,0,14,0c2.8,0,5.6,0.3,8.2,1.3c3.4,1.3,6.8,1.6,10.4,1.6
		c7.3-0.1,14.6,0.7,21.7,2.7c4.2,1.2,8.5,1.2,12.7,1.8c3.9,0.5,7.7,1.2,11.5,2.4c7.3,2.4,14.9,3.4,22.5,4.7c5.1,0.9,10,2.5,15.1,3.5
		c8.3,1.6,16.3,4.3,24.4,6.7c5.8,1.7,11.1,4.7,16.8,6.7c9.7,3.5,18,9.4,26.6,15c4,2.6,7.4,6.1,10.4,9.8c2.2,2.8,4.3,5.6,6.5,8.3
		c0.9,1.1,1.6,2.3,1.3,3.8c-1.1,7.4-2.5,14.7-7.4,20.7c-2.3,2.8-4.7,5.5-7.5,7.9c-2.9,2.6-5.8,5.2-8.7,7.8
		c-4.4,4.1-9.3,7.2-14.7,9.8c-5.2,2.5-10.1,5.6-15.1,8.6c-7.6,4.6-15.2,9.3-23.4,12.9c-9.4,4.2-18.7,8.7-28.2,12.8
		c-10.2,4.5-20.8,8.6-32.4,7.9c-3-0.2-6,0.1-9,0.6c-5.2,0.9-10.3,0.4-15.3-0.9c-2.5-0.6-5-0.9-7.5-0.1c-2.2,0.7-2.8,1.8-2.1,4
		c3.1,9.1,4.6,18.6,6.2,28c2.1,12.7,4.2,25.3,6,38c1.6,11,3.5,21.9,3.2,33c-0.1,3.7,0.5,7.3,1.3,10.9c0.7,3.2,1.5,6.4,1.7,9.7
		c0,0.9,0.2,1.8,0.6,2.6c2.6,4.6,3.5,10,5.7,14.8c0.5,1.1,1,2.3,1.2,3.6c1.5,7.2,3.7,14.3,5,21.6c1.3,7.6,2.8,15.3,5.6,22.6
		c0.1,0.2,0.2,0.5,0.2,0.7c2.4,11.8,5.6,23.4,7.9,35.3c2,10.6,3.3,21.3,4.1,32.1c0.3,3.7,1.1,7.4,1.7,11.1c0.1,0.7,0.4,1.5,0.4,2.2
		c-0.2,5.6,1.6,10.9,2.2,16.4c0.2,1.7,0.2,3.5,0.3,5.3c0.4,9.5,1.1,19.1,1.9,28.6c0.4,4.8-0.1,9.6-0.7,14.3c-0.3,2-0.1,4-0.3,6
		c-0.9,10.1-2.6,20.2-5.3,30c-0.8,2.8-1.4,5.6-3.5,8.1c-1.8,2.1-2.3,5.5-2.9,8.5c-0.8,3.6-2.5,6.9-4.1,10.1
		c-2.2,4.4-3.4,9.2-5.6,13.5c-2.3,4.4-4.1,9.1-6.9,13.3c-0.8,1.2-1.4,2.6-2,4c-3.1,7.6-7.5,14.5-11.5,21.7
		c-2.6,4.6-4.6,9.5-6.2,14.6c-3.2,10.1-7.7,19.7-12.3,29.2c-3.2,6.4-6.2,12.9-8.8,19.6c-1.8,4.6-4.1,8.9-6.7,13.1
		c-1.7,2.7-3.1,5.4-5.8,7.2c-1.1,0.7-2.1,1.3-3.4,1.4c-7.8,0.3-15.5,1.5-23.3,1.8c-12.3,0.5-24.6,1.2-36.9,2.5
		c-5.6,0.6-11.3,0-17,0.2c-9.7,0.4-19.3,1-29,1.5c-0.8,0-1.5,0.1-2.3,0.1C842.8,1104.7,822.4,1104.4,802,1104.5z"/>
	<path d="M315.2,617.1c-6.1,0.8-12.1,1.4-18.1,2.3c-4.8,0.7-9.5,0.6-14.3,0.8c-4.4,0.1-8.8,0.3-13.2,0.4c-9.5,0.3-18.8-0.4-27.9-3.7
		c-6.2-2.3-10.6-6-13.5-11.9c-1.1-2.2-1.2-4.4,0.2-6.4c1.5-2.3,3.2-4.5,5.5-6.2c8.7-6.9,16.8-14.4,24.3-22.6
		c6.6-7,12.7-14.3,18.5-21.9c3.7-4.9,8-9.4,11.4-14.5c3-4.4,6.8-8.5,7.8-14.1c0.2-1.1,0.8-2.1,1.3-3.1c2-3.5,3.5-7.3,4.6-11.1
		c1.6-5.5,4-10.6,7.4-15.2c1.1-1.4,1.8-3,2.4-4.7c2.4-5.8,5.3-11.4,7.9-17.1c1.9-4.2,4-8.3,5.3-12.9c3.1-11.3,6.8-22.4,9.9-33.6
		c3.4-12.4,7.3-24.6,10.9-36.9c1.9-6.4,4.5-12.5,6.6-18.8c1.8-5.2,3.2-10.6,4.9-15.8c2.9-9.1,6.1-18.1,8.8-27.3
		c2.2-7.5,4.9-14.8,6.8-22.3c2.2-8.5,4.1-17.1,5.9-25.7c0.8-3.7,2.3-7.2,3.5-10.7c0.7-2,1.3-4.1,1.7-6.2c1.1-6.1,2.8-12,4.5-17.9
		c1.4-4.6,1.9-9.4,2.1-14.1c0.2-5,1.9-9.7,1.9-14.5c0-6.1,1.3-12,2.1-17.9c1.2-8.7,0.9-17.6,2.3-26.3c0.7-4.4,1.6-8.8,4.1-12.8
		c2.4-3.8,5.5-4.8,9.6-4.4c6.8,0.7,13.3,2.8,19.6,5.4c0.9,0.4,1.8,0.9,2.8,1.2c4,1.1,7.7,1,10.6-2.6c1.6-2.1,3.9-3.5,6-5.2
		c5.9-4.8,11.8-9.8,18.7-13.4c2.5-1.3,4.9-2.5,7.6-3.2c3.9-1,7.8-2.1,11.5-3.7c2.8-1.2,5.8-1.7,8.8-1.8c2.5-0.1,5.1-0.1,7.5-0.8
		c5-1.4,10-0.5,15-0.1c6.7,0.5,13.3,0.9,19.9,1.8c1.8,0.2,3.8,0.1,5.6-0.3c3.3-0.6,6.5-0.3,9.7,0.6c13.1,3.6,24.7,9.8,35.3,18.2
		c3.7,2.9,7.4,5.8,10.7,9c5.1,5,10.5,9.7,15.2,15.2c1.3,1.5,2.1,3.2,2.4,5.1c0.9,5.9,0.6,11.5-2.8,16.7c-2.5,3.8-5.4,7.2-9.6,9.3
		c-2.2,1.1-3.9,2.8-5.2,4.8c-2.7,4.2-5.7,8-9.4,11.3c-1.7,1.6-3,3.3-3.5,5.7c-0.3,1.5-1.1,2.8-1.5,4.3c-1.2,4-2.1,8-1,12.2
		c0.9,3.6,1.1,7.4,1.1,11.2c0,1,0.1,2,0.4,3c1.7,5.3,3.1,10.6,7.1,14.8c2,2.1,2.6,5.2,3.7,7.8c3.8,9.2,11.3,13.8,20.2,16.7
		c1.7,0.6,3.3,1.2,4.2,2.9c1.1,1.9,0.7,3.5-1,5c-4.5,4.1-8.4,8.6-9.2,15.1c-0.3,2.3-1.3,4.4-2.6,6.3c-2.3,3.5-4,7.3-6.8,10.4
		c-0.2,0.2-0.3,0.4-0.4,0.6c-4.5,8.9-9,17.7-11.8,27.3c-0.9,3.1-2,6.1-3.3,9.1c-3.3,7.4-3.3,15.1-2.1,23c0.2,1.2,0.8,2.1,1.5,3
		c4,5,8.4,9.7,13.6,13.5c5.3,3.9,11.7,5.2,17.8,7c2.5,0.7,5.1,1.3,7.7,2c2.5,0.7,4.2,2.1,4.7,4.8c0.5,2.5-0.7,4.1-2.5,5.4
		c-2.6,1.8-3.7,4.8-5.5,7.2c-4.6,6.3-8.9,12.8-12.8,19.6c-1.3,2.3-2.2,4.8-3,7.3c-2.5,8.4-6.1,16.6-6.9,25.4
		c-0.7,8.5-2.9,17-1.6,25.6c1.2,8,0.8,16,2.4,24c1.1,5.2,1.1,10.7,1.8,16.1c0.3,2.1,0.4,4.3,0.9,6.3c1.7,7.7,2.8,15.6,5,23.2
		c0.6,2.1,0.8,4.2,0.8,6.3c0,6,1.3,11.8,2.7,17.5c1.2,4.9,2.3,9.8,2.8,14.8c0.3,3.3,1.3,6.4,2.2,9.6c2.4,8.3,3.4,16.8,5.2,25.1
		c0.2,1,0.3,2.1,0.8,2.9c4,7.5,4.2,15.8,5.2,23.8c0.6,4.1,1.4,8.2,2.2,12.3c1.1,5.2,1.7,10.4,1.8,15.7c0.2,14.5-0.9,28.9-1,43.4
		c0,1.6-0.3,3.3-0.6,4.9c-1.5,7.3-2.1,14.7-2.4,22.1c-0.3,6.5-0.8,13.1-1.4,19.6c-0.2,2.6-1.3,5.1-2.5,7.5c-1.3,2.7-2.9,5.3-3.9,8.2
		c-0.5,1.5-1.6,2.6-3.1,3.1c-1.3,0.4-2.7,1.1-4,0.9c-4.4-0.6-8.8,0.2-13.1-0.5c-3.9-0.7-7.7-1-11.6-1c-12,0.1-23.9,0.1-35.9,0
		c-3.6,0-7,0.6-10.3,2.1c-2.9,1.3-5.9,2.1-9.1,2.6c-7.1,1.1-13.6,3.6-19.1,8.4c-3.5,3-8,4.8-11.2,8.3c-1.8,1.9-3.4,3.6-3.8,6.3
		c-0.4,2.2-1.9,3.8-3.2,5.5c-2.8,3.3-4.4,7-5.2,11.2c-0.6,3.5-2.3,6.6-3.2,10c-2.2,8.6-1.6,17.3-1.1,25.9c0.2,4.5,0.6,9,1.2,13.5
		c0.5,4.2,1.8,8.1,3.6,11.8c1.7,3.4,3.4,6.8,4.6,10.4c2.5,7.5,5.8,14.8,9.1,22c3.2,6.9,7.7,13,12.7,18.6c1.3,1.4,2.6,2.8,3.4,4.5
		c3,6,7.5,10.7,12,15.4c1.6,1.6,3.2,3.2,4.7,4.9c7,7.8,15,14.5,23.1,21.1c6.8,5.6,13.4,11.4,19.5,17.7c4.7,4.8,9,10.3,14.9,13.8
		c1.7,1,3.2,2,2,4.5c-0.7,1.5,0.9,2.2,1.6,3.2c4.7,6.8,1.3,15.8-6.7,17.6c-1.2,0.3-2.5,0.3-3.8,0.3c-4.7,0-9.3-0.2-13.9,1.2
		c-1.4,0.4-3,0.3-4.5,0.3c-4,0-8.1-0.1-12.1,0c-7,0.2-13.8-0.7-20.7-1.5c-9.9-1.1-19.7-2.7-29.7-2.4c-1.5,0.1-3,0-4.5,0
		c-14.4,0-28.7-0.5-43,0.7c-20.3,1.7-40.5,0.6-60.8,0.8c-7.1,0.1-14.1,0.4-21,1.7c-2.4,0.4-4.7,0.6-7.1,0.6
		c-16.1,0-32.3,0.2-48.4-0.1c-7.3-0.1-14.5-1.1-21.8-1.4c-6.3-0.3-12.5-1.3-18.8-1.9c-4.8-0.5-9.6-0.4-14.3-0.2
		c-7.8,0.3-15.6,0-23.4-0.6c-9.8-0.8-19.4-3.3-29.1-4.4c-3.6-0.4-7.2-1-10.9-1.3c-11.9-1.1-22.4-5.7-31.7-13c-2.3-1.8-4-4.2-5.4-6.8
		c-1.5-2.9-3.2-5.6-5.6-8c-2.6-2.6-3-6.3-3-9.8c0-2.3,1.4-4.3,3.6-5.4c1-0.5,2.1-0.9,2.9-1.8c2.6-3,5.8-4,9.7-3.7
		c6.5,0.4,12.4-1.5,17.9-4.9c6.4-4,12.8-8,19-12.3c4.2-3,8.7-5.5,13.4-7.6c6.9-3.1,12.5-7.9,17.1-13.9c1.3-1.7,1-2.9-0.9-4.1
		c-0.9-0.6-2-1.1-3.1-1.4c-9.8-2.2-18.4-7.4-27.7-11c-5.4-2.1-10.9-3.9-16.1-6.5c-4.3-2.1-8.4-4.4-12.1-7.6c-3.7-3.2-7.7-6-11.5-9.2
		c-7.4-6.2-14.9-12.3-22.5-18.3c-5.7-4.5-11.3-9.2-16.3-14.6c-6.1-6.7-11.5-13.9-16.1-21.7c-4.2-7.1-8.5-14.2-13.5-20.9
		c-4.2-5.6-8.3-11.4-12.2-17.2c-2-3-2.8-6.5-4.2-9.7c-2-4.7-5.1-8.9-5.9-14.2c-0.4-3-1.2-5.9-1.8-8.8c-1.2-5.2,1.3-9.8,3.9-14.2
		c1.5-2.6,4.3-4.3,4.8-7.6c0.1-0.3,0.8-0.6,1.1-0.9c2.7-2.2,5.4-4.4,8-6.6c0.1-0.1,0.3-0.1,0.3-0.2c0.6-2,1.3-3.3,4-3.4
		c2-0.1,3.9-1.6,5.8-2.5c2.7-1.3,5.6-2.1,7.9-4.3c0.7-0.7,1.7-1.1,2.7-1.2c1.2-0.1,2.2-0.6,3.1-1.2c7.2-4.6,15-7.5,23.1-9.8
		c0.2-0.1,0.5-0.2,0.7-0.2c8.3-0.8,16.5-2.3,25-2c10.7,0.4,21.3,2.3,32,1.9c2.6-0.1,5.2,0.6,7.9,0.8c3,0.2,6,0.7,9,0
		c0.8-0.2,1.8-0.2,2.6,0c7.2,1,14.4,2.3,21.5,4c1.7,0.4,3.3,1.3,4.8,2.1c6.4,3.2,12.9,6.3,19.1,9.8c6,3.3,11.9,7.1,17.8,10.7
		c2.3,1.4,4.5,2.7,6.9,4c4.1,2.2,6.9,1.3,9-2.8c5.4-11.1,10.9-22.2,15.4-33.6c2.2-5.4,5.4-10.2,7.5-15.6c4.4-11,9.1-21.8,11.8-33.4
		c0.9-3.8,2.3-7.5,4-11c0.5-1,0.9-2.1,1.3-3.1c1.4-3.9,2.4-7.9,4.5-11.6c1.2-2.2,1.5-5,2.2-7.6c0.9-3.4,1.7-6.8,3.2-10.1
		c0.7-1.6,1.1-3.2-0.6-4.4c-1.6-1.1-2.8-0.1-4,0.9c-0.3,0.2-0.6,0.5-0.8,0.8c-8.3,8.2-18.6,11.7-29.9,12.8
		c-3.8,0.4-7.5,0.8-11.3,0.2c-1.6-0.3-3.3,0-4.9,0.2c-2,0.2-4,0.1-6-0.4c-5.6-1.4-7.6-7.3-4.1-11.9c0.2-0.3,0.5-0.6,0.8-0.8
		c3.9-2.6,5.5-6.7,7.2-10.8c2.4-5.7,6.3-10.6,9.4-15.9c3.8-6.5,7.4-13.2,11-19.8C315.3,618.4,315.6,618,315.2,617.1z M383.4,826.5
		c-0.5,2,0.3,2.9,1.5,3.6c2.5,1.5,4.7,3.3,6.8,5.4c2.1,2,4.6,3.6,7.1,5c1.5,0.8,3.3,1.9,4.9,0.5c1.9-1.6,3.7-3.3,4.2-6
		c1.3-6.8,3.5-13.4,7-19.4c0.4-0.7,0.8-1.6,0.9-2.5c0.2-2.6,1.4-4.8,2.3-7.1c0.7-1.6,1.2-3.3,1.7-5c2.1-6.9,3.1-14,4.9-20.9
		c1.2-4.6,2.3-9.2,2.8-14c0.4-4.3,0-8.6,1-12.8c1.8-7.6,2.1-15.4,3.1-23.2c0.1-1,0.3-2.1-0.9-2.6c-1.1-0.4-2.3-0.4-3.1,0.6
		c-0.7,0.9-1.2,1.9-1.7,2.9c-2.6,4.7-4.1,10-7.1,14.6c-5.3,8-9,16.8-12.7,25.6c-5.7,13.7-11.1,27.5-17.8,40.8
		C385.8,816.7,384.7,822,383.4,826.5z M467.5,374.5c-0.3-0.1-0.7-0.2-1-0.3c-1.1,2.2-2.4,4.4-3.2,6.7c-1.2,3.6-3.2,6.8-5.2,10
		c-3.7,6-7.5,11.9-9,19c-0.9,4.3-1.4,8.7-2.2,13c-0.2,0.8-0.7,1.8,0.1,2.5c0.9,0.7,1.6-0.1,2.4-0.5c4.7-2.5,9.3-5,14-7.4
		c1.8-0.9,2.4-2.3,2.5-4.2c0.3-4.6,0.7-9.3,1.1-13.9C467.9,391.1,467.5,382.8,467.5,374.5z M505,403.6c4.8-0.5,8-2.3,8.7-7.2
		c0.2-1.2,0.8-2.4,1.3-3.5c2-5.2,4-10.3,5-15.8c1.1-6,1.1-12,1-18c0-1.3-0.5-2.2-1.9-2.4c-1.5-0.2-1.5,0.9-1.7,1.9
		c-2.1,10.4-5.6,20.3-8.6,30.4C507.4,393.7,505.7,398.3,505,403.6z"/>
	<path d="M1208.3,1079.4c-11.5-0.9-24.2,0.8-36.9,2.8c-11.1,1.7-22.3,2.5-33.5,2.6c-8.6,0.1-17,1.5-25.5,2.5
		c-2.1,0.2-4.2,0.5-6.4,0.5c-14.6,0-29.2,0-43.8,0c-3.2,0-6.2,0.5-9.2,1.8c-2.4,1.1-4.9,2-7.6,2c-5.3-0.2-10.5,1-15.7,1.8
		c-9.5,1.4-19,1.1-28.6,0.6c-0.6,0-1.3-0.1-1.9-0.3c-2.1-0.7-4.5-0.4-6-2.6c-2.2-3.3-4.3-6.6-3.2-10.8c1.1-3.9,2.5-7.7,2.5-11.8
		c0-0.8,0.4-1.7,0.9-2.4c3.7-5.1,5.9-11.1,9.5-16.2c3.5-5,6.7-10,9.9-15.2c2.3-3.9,5.3-7.3,8.1-10.9c2.3-2.9,4.1-6,5.2-9.6
		c2.4-8.5,7.6-15.6,11.5-23.4c2.9-5.8,6.2-11.6,7.8-17.9c0.1-0.2,0.1-0.5,0.3-0.7c4.2-5.7,5-12.8,8.3-18.9c3-5.4,4.3-11.5,6.2-17.4
		c0.8-2.4,1.4-4.8,2.5-7.1c0.3-0.7,0.8-1.4,0.8-2.1c0.5-5.5,2.3-10.7,2.2-16.3c0-2.6,1.2-5.1,1.1-7.8c-0.2-4.2,0-8.3,0-12.5
		c0-7.7-0.3-15.4,1.4-22.9c0.7-3.1,0.4-6.4-0.2-9.4c-1.3-6.6-1.6-13.2-2.5-19.8c-0.5-3.6-0.6-7.3-0.9-10.9c-0.2-2.4-0.6-4.7-0.8-7.1
		c-1.3-11.3-3-22.5-5.7-33.5c-2.3-9.6-3.8-19.5-7.2-28.9c-0.6-1.8-0.7-3.7-1.2-5.5c-3.8-13.4-6.9-27-10.3-40.5
		c-2.9-11.7-5.8-23.4-8.8-35.1c-1.1-4.3-2.4-8.5-3.6-12.7c-1-3.5-1.3-7.2-1.7-10.8c-0.7-5.7-1.5-11.5-2.4-17.2
		c-1-6.5-1-13.1-2.3-19.5c-1.3-6.4-1-12.8-1.3-19.2c-0.2-4,1.3-7.7,1.3-11.6c0-2.4-0.1-4.4-1.6-6.4c-0.8-1.1-1.7-2.4-0.6-3.8
		c1-1.2,2.3-1.8,4-1.3c6.6,1.9,12.9,0,19.3-1.5c7.2-1.7,14.5-3.4,21.7-5c3-0.7,5.8-1.7,8.4-3.2c9.3-5.3,18.9-10,28.8-14
		c8.6-3.4,17.5-6.5,25.2-11.9c7.4-5.2,14.7-10.7,22-16c3.9-2.9,7.8-6,11.7-8.9c3.2-2.5,5.6-5.7,8.5-8.6c5.2-5.1,7.9-11.6,10.2-18.3
		c2.1-6,4.2-12.1,6.4-18.2c1.4-3.8,0.6-6.6-2.7-9.2c-4.2-3.4-7.8-7.4-11.8-11.1c-5.2-4.8-10.6-9.4-17-12.4c-2.4-1.1-4.8-2.2-7.4-2.7
		c-2-0.4-3.8-1.3-5.7-2.1c-7.4-3.3-15.4-4.6-23.3-6.1c-3.3-0.6-6.7-0.9-9.5-3.4c-1.3-1.2-3.3-1.3-5.1-1.2
		c-5.9,0.2-11.6-0.9-17.1-2.6c-6.8-2-13.8-2.8-20.7-4.2c-2.7-0.6-5.5-0.9-8.1-1.8c-8.8-3-18-3.4-27.1-4.5c-12.7-1.5-25.7-1-38.3-3.9
		c-3.8-0.9-7.8-1.1-11.6-1c-7.3,0.3-13.5-2.8-19.6-6.1c-2.9-1.6-5.1-4.5-7.3-7c-2.7-3.1-5.3-6.5-7.6-9.9c-3.1-4.8-1.9-9.4,3.1-12
		c2.9-1.5,5.1-3.7,7.4-5.8c6.7-6.2,12-13.6,16.6-21.4c3.6-6.1,8.5-11.3,11.4-17.8c3.1-6.9,6.8-13.4,10.1-20.2
		c5-10.3,7.9-21.2,10.7-32.1c0.9-3.5,0.6-6.8-0.9-10.2c-2.4-5.7-6-10.8-8.1-16.6c-0.9-2.6-3.6-3.8-5.4-5.7c-2.9-2.9-6.2-5.5-9.2-8.4
		c-2.7-2.5-4-6.1-6.3-8.9c-5.7-7.1-7.5-15.8-10.7-24c-0.6-1.5-0.8-3.2-1.1-4.8c-0.2-1.2-0.3-2.5-0.6-3.7c-2.1-6.6-2.8-13.2-0.9-20
		c0.3-1.1,0.3-2.3,0.1-3.4c-0.7-4.6,0.8-8.7,2.7-12.7c1.8-3.8,3.6-7.5,4.9-11.4c0.4-1.1,1.3-2.1,2-3.2c7.1-11.2,17.5-18.1,29.5-23.2
		c6.5-2.7,12.9-5.7,19.5-8.1c3.5-1.3,6.1-3.8,7.9-7.2c2.4-4.7,5.3-9.1,7.6-13.9c1.7-3.7,5-6.2,8-9c8.4-7.9,18.8-12,29.4-15.7
		c5.6-1.9,11.2-4.1,16.9-5.3c10.6-2.2,21.2-4.1,32.1-4.9c12.1-0.9,23.9,0.9,35.4,4.5c9.5,3,18.3,7.5,26.3,13.6
		c5.5,4.2,9.5,9.5,13.3,15.1c3.1,4.5,6.3,9.1,10,13.2c3.8,4.2,5.6,9.9,9.7,13.8c0.1,0.1,0.1,0.2,0.2,0.3c1.8,6.5,5.2,12.2,7.3,18.6
		c1.9,5.9,3.6,12,7.2,17.4c2.4,3.6,3.4,8.1,4.9,12.2c2.5,6.6,2,13.5,2.2,20.1c0.2,6.9-0.8,13.9-2.7,20.9
		c-2.5,9.4-7.3,17.6-11.7,26.1c-3.1,6.1-5.8,12.2-5.7,19.3c0.1,4.5-1.4,8.7-4.7,12c-3.2,3.3-5.7,7.2-8,10.9
		c-3,4.8-7.1,8.4-10.9,12.5c-7.7,8.2-16.7,14.9-25,22.4c-1.2,1.1-2.6,2-4,2.9c-5.9,3.9-11.8,7.7-17.7,11.5c-0.8,0.5-1.8,0.9-2.7,1.4
		c-9.3,4.5-18.7,8.8-27.3,14.5c-4.2,2.8-8.7,2.9-13.4,2.3c-1.4-0.2-2.7-0.5-4.1-0.5c-2.6,0-4,1.2-3.7,3.6c0.8,5.8,2.9,11.2,6.9,15.6
		c1.4,1.6,3.6,1.8,5.5,2.2c12.1,2,23.6,6,34.9,10.8c8.5,3.6,16.5,8,24.6,12.3c5.8,3.1,12,5.4,18.3,6.9c8.9,2.2,17.8,4.7,26.5,7.4
		c10.9,3.4,21.2,7.9,31,13.6c7.6,4.5,15.1,9.2,21.2,15.6c4.4,4.5,8.1,9.6,10.7,15.4c1.5,3.3,3.5,6.4,5.2,9.6
		c2.2,4.2,3.7,8.8,5.2,13.3c2,6.1,1.9,12.6,3.4,18.9c0.2,0.8,0.1,1.8,0,2.6c-0.7,3.2-1.1,6.4-1.3,9.7c-0.2,4.5-2.4,8.4-3.4,12.7
		c-0.2,1-0.7,1.9-0.8,2.9c-0.7,11.6-3.1,22.9-4.5,34.4c-0.7,5.9-1.9,11.6-2.9,17.4c-0.9,5.4-1.2,11-1.7,16.5
		c-0.4,4.6-0.6,9.3-0.9,13.9c-0.2,3.5,0,7-0.6,10.5c-0.7,3.7,0,7.5,0.3,11.3c0.3,3.3,0.3,6.5,0.3,9.8c0,2.3,0,4.5,0.6,6.8
		c1.1,4.3,0.3,8.8,0.9,13.1c0.7,4.5,0.6,9.1,1.9,13.4c0.6,2.1-0.4,4.3,0,6.4c1,5.8,1.9,11.7,3.1,17.5c1.5,7.4,3.7,14.7,4.5,22.1
		c0.8,6.6,2.2,13.1,3,19.8c0.9,7.1,2.5,14.1,3.9,21.1c0.6,2.9,0.2,5.4-1.4,7.9c-2.6,4.3-5.2,8.6-8.9,12.1c-1.6,1.6-2.7,3.6-4.1,5.4
		c-3.3,4.3-7.3,7.9-11.9,10.9c-2.2,1.4-3.8,3.7-5.8,5.3c-5.4,4.3-10.9,8.6-16.3,12.8c-2,1.5-3.9,3.2-5.6,5
		c-4.6,4.6-9.8,8.2-15.3,11.6c-5.4,3.4-10.8,6.8-15.4,11.4c-2.5,2.5-5.9,4.3-9.1,6c-2.4,1.4-4.6,3.1-6.9,4.5c-1.7,1-2.3,2.6-1.9,4.5
		c1.2,5.4,5.7,8.2,11.1,6.7c1.2-0.3,2.4-0.7,3.5-1.3c9.5-5.2,19.4-9.6,29.6-13.3c5.1-1.9,9.9-4.4,14.7-6.8c5-2.5,10.2-4.4,15.1-7
		c4.4-2.3,8.6-4.7,12.8-7.2c4.4-2.6,9.2-4.5,13.8-6.9c7.4-3.8,15.3-6.5,22.8-9.9c3.2-1.4,6.5-2.6,9.9-3.8c10-3.7,18.5-1,26,6
		c3.9,3.7,7.6,7.7,10.3,12.5c3.2,5.6,5.6,11.4,6,18.1c0.4,6.5,1.7,13,1.5,19.6c-0.2,6.8,0.4,13.6-0.7,20.3
		c-0.6,3.6,0.1,7.3-0.8,10.9c-0.7,2.8-1.1,5.7-1.9,8.5c-1,4.1-1.1,8.2-1.3,12.4c-0.4,8.7-0.5,17.3-1.9,25.9
		c-0.8,4.7-0.7,9.5-0.8,14.3c-0.1,3.4-0.5,6.7-1.4,10c-2.8,9.7-5.4,19.4-8.1,29.1c-3,10.4-6.9,20.5-11.4,30.4
		c-4.4,9.5-7.6,19.5-11.3,29.2c-1,2.5-2,4.9-3.6,7c-3.4,4.4-6.6,8.9-10.5,12.9c-1.3,1.4-2.4,2.9-3.3,4.6c-1.8,3.5-4.6,5.7-8.4,6.5
		c-5,1.1-10.1,2.1-15.2,2.8c-5.7,0.8-11.4,2.1-17,3.3c-11.2,2.5-22.6,3.3-34,4.2C1226.8,1079.4,1218.3,1079.1,1208.3,1079.4z
		 M1203.2,661.5c-1.7,0.2-2.3,1.3-2.7,2.5c-1.8,6-4.1,12-4.8,18.2c-0.8,7.8-2.3,15.4-3.5,23.1c-0.8,5.2-1.1,10.5-1.6,15.8
		c-0.1,0.6-0.1,1.4,0.7,1.5c0.7,0.1,1.2-0.4,1.5-0.9c2.6-3.7,5.6-7.2,7.8-11.2c1.1-1.9,1.8-3.9,2-6c0.5-5.9,0.3-11.8,0.4-17.7
		c0-5.6,0.3-11.3,0.4-16.9C1203.7,667.2,1204.2,664.4,1203.2,661.5z"/>
</g></svg>
     <!-- Create a div where the text box will take place -->
     <div id="my_dataviz"></div>
     <div id="pieChart"></div>
    <style>
         /*hover effect parameters*/
         .node:hover{
              stroke-width: 7px !important;
              opacity: 1 !important;}

         /*setup of body*/
          body {
              background-color: #3b3939;
              font-family: "avenir next", Montserrat, sans-serif;
              }
    </style>
    

    
  </head>
  
  <body>
    <script>
     //name the svg different to separate group---------SVG
     var svg = d3.select("svg")
                    .append("g")
      
                
     var defs = svg.append('defs');
     var gradient = defs.append('linearGradient')
                        .attr('id', 'svgGradient')
                        .attr('x1', '0%')
                        .attr('x2', '100%')
                        .attr('y1', '0%')
                        .attr('y2', '100%');

                        gradient.append('stop')
                        .attr('class', 'start')
                        .attr('offset', '0%')
                        .attr('stop-color', 'pink')
                        .attr('stop-opacity', 1);

                        gradient.append('stop')
                        .attr('class', 'end')
                        .attr('offset', '100%')
                        .attr('stop-color', '#3b3939')
                        .attr('stop-opacity', 1);
                        
     var gradient1 = defs.append('linearGradient')
                        .attr('id', 'svgGradient1')
                        .attr('x1', '0%')
                        .attr('x2', '20%')
                        .attr('y1', '0%')
                        .attr('y2', '60%');

                        gradient1.append('stop')
                        .attr('class', 'start')
                        .attr('offset', '0%')
                        .attr('stop-color', '#7b6888')
                        .attr('stop-opacity', 1);

                        gradient1.append('stop')
                        .attr('class', 'end')
                        .attr('offset', '100%')
                        .attr('stop-color', "#2a232e")
                        .attr('stop-opacity', 1);
   
     var gradient2 = defs.append('linearGradient')
                        .attr('id', 'svgGradient2')
                        .attr('x1', '0%')
                        .attr('x2', '40%')
                        .attr('y1', '0%')
                        .attr('y2', '20%');

                        gradient2.append('stop')
                        .attr('class', 'start')
                        .attr('offset', '0%')
                        .attr('stop-color', '#cc7cfc')
                        .attr('stop-opacity', 1);

                        gradient2.append('stop')
                        .attr('class', 'end')
                        .attr('offset', '100%')
                        .attr('stop-color', "#2a232e")
                        .attr('stop-opacity', 1);
         var gradient3 = defs.append('linearGradient')
                        .attr('id', 'svgGradient3')
                        .attr('x1', '0%')
                        .attr('x2', '20%')
                        .attr('y1', '0%')
                        .attr('y2', '50%');

                        gradient3.append('stop')
                        .attr('class', 'start')
                        .attr('offset', '0%')
                        .attr('stop-color', "#2a232e")
                        .attr('stop-opacity', 1);

                        gradient3.append('stop')
                        .attr('class', 'end')
                        .attr('offset', '100%')
                        .attr('stop-color', "#7b6888")
                        .attr('stop-opacity', 1);
           
      
                        
       
         var butCol='#ebb7d1';

          var 	formatAsPercentage = d3.format("%"),
                formatAsPercentage1Dec = d3.format(".1%"),
                formatAsInteger = d3.format(","),
                fsec = d3.timeFormat("%S s"),
                fmin = d3.timeFormat("%M m"),
                fhou = d3.timeFormat("%H h"),
                fwee = d3.timeFormat("%a"),
                fdat = d3.timeFormat("%d d"),
                fmon = d3.timeFormat("%b");
	
 
 /*
################ FORMATS ##################
-------------------------------------------
*/

let url="https://raw.githubusercontent.com/Hookay/DataVisualization/main/LAB4/population.csv";
let url2="https://raw.githubusercontent.com/Hookay/DataVisualization/main/LAB4/data-further-education-outcome-based-success-measures.csv";
let url3="https://raw.githubusercontent.com/Hookay/DataVisualization/main/LAB4/data-further-education-and-skills.csv";
var time =["2016","2017","2018","2019"] 
var t=1;
d3.csv(url).then( function(graph2){ d3.csv(url2).then( function(graph){d3.csv(url3).then( function(graph3){
// FS PIE========================================================
var chart=[];
    
      //name the svg different to separate group---------SVG
      var svg2 = d3.select("svg")
                    .append("g")

      // append separate groups
      svg2.append("g")
        .attr("class", "slices");
      svg2.append("g")
        .attr("class", "labels");
      svg2.append("g")
        .attr("class", "lines");
       ;

      //add parameters for dimensions-------------------PARAMETERS
      var width2 = 760,
          height2 = 250,
          radius = Math.min(width2, height2) / 2;
      //create pie from values
      var pie = d3.pie()
        .sort(null)
        .value(function(d) {
          return d.value;
        });
      //define arc
      var arc = d3.arc()
        .outerRadius(radius * 0.8)
        .innerRadius(radius * 0.6);
      // define outer arc so we coplete the hollow look
      var outerArc = d3.arc()
        .innerRadius(radius * 0.9)
        .outerRadius(radius * 0.9);
      //position it on the svg plane
      svg2.attr("transform", "translate(" + ((width2 / 2)+300) + "," + ((height2 / 2)+400) + ")");
     // get the labels  
      var key = function(d){ return d.data.label; };
      //order to colour countries and their colour
      
      
      
      var color2 = d3.scaleOrdinal()
        .domain(["Carry on Study","Work","Work and Study","Benefit","Fail","Undecided"])
        .range(["#a0fad3","#f5a2af","#dbaffa","#f77472","#a897b8","#e6f7f6"]);
      var t=0;
      var ag=0;
          
      var total,study,work,wostu,benf,fail,und;
      var age=["25 - 49","50 and over","19 - 24"]
      var time2 =["201516","201617","201718","201819"] 
      var chart2=[];
      
//FS BUBBLES====================================================
//FS,?,Industry,Services,Agriculture,IN:Arts,IN:constr,IN:engineering,IN:science,SE:busn,SE:ed,SE:hlt,SE:his,SE:Inf,SE:lng,SE:tur,SE:non,SE:prep,SE:ret,SE:soc
    var color3=   d3.interpolateRgb("#5c5454", "#fcba8d");
    var age3=["19","25","50"]
    var time3 =["2016","2017","2018","2019"] 
    var prof =["agriculture","industry","services"]
    var data=[];
    var scale=0.1;
    var packLayout = d3.pack().size([330, 330]);


//AGE PIE=======================================================
      //name the svg different to separate group---------SVG
      var svg3 = d3.select("svg")
                    .append("g")

      // append separate groups
      svg3.append("g")
        .attr("class", "slices2");
      svg3.append("g")
        .attr("class", "labels2");
     
     
      //add parameters for dimensions-------------------PARAMETERS
      var width = 760,
          height = 250,
          radius2 = Math.min(width, height) / 2;
      //create pie from values
      var pie2 = d3.pie()
        .sort(null)
        .value(function(d) {
          return d.value;
        });
      //define arc
      var arc2 = d3.arc()
        .outerRadius(radius2 * 0.8)
        .innerRadius(radius2 * 0.4);
      // define outer arc so we coplete the hollow look
      var outerArc2 = d3.arc()
        .innerRadius(radius2 * 0.9)
        .outerRadius(radius2 * 0.9);
      //position it on the svg plane
      svg3.attr("transform", "translate(" + ((width / 2)-100) + "," + ((height / 2)+180) + ")");
      
      
      var color = d3.scaleOrdinal()
        .domain(["19 - 24","25 - 49","50+"])
        .range([ "url(#svgGradient1)", "url(#svgGradient2)", "url(#svgGradient3)"]);
      var time =["2016","2017","2018","2019"] 
      var chart=[];
      var gender=["male","female"]
      var gender2=["Male","Female"]
      var gen = 1;
      
      

      
      
      
      
      //LOAD DATA=============================================
       load2(ag,t,gen);
      //initialise chart
      change(colorData2(chart2));  
     
     
     //AGE
      // dsPieChart(dataset); 
      load(ag,t,gen);
      //initialise chart
      change2(colorData(chart));  
     
      
      load3(ag,t,gen);
      furtherStudy(data);
      
  
      
      

      function colorData2 (val){
        //define label as the domain of colour
        var labels = color2.domain();
        //value to get array index
        var ind=-1;
        //mapp the value of the data to the colour label to lock country colour and value to each other
        return labels.map(function(label){
          ind++
          return { label: label, value: val[ind]}

        });
      };   
      function change(data) {
     
        /* ------- PIE SLICES -------*/
        var slice = svg2.select(".slices").selectAll("path.slice")
          .data(pie(data), key);

        slice.enter()
          .insert("path")
          .style("fill", function(d) { 

          return color2(d.data.label); })
          .attr("class", "slice");

        slice		
          .transition()
           <!--add ease style->
          .ease( d3.easeElastic) 
          .duration(1000)
          .attrTween("d", function(d) {
            this._current = this._current || d;
            var interpolate = d3.interpolate(this._current, d);
            this._current = interpolate(0);
            return function(t) {
              return arc(interpolate(t));
            };
          })

        slice.exit()
          .remove();

        /* ------- TEXT LABELS -------*/

        var text = svg2.select(".labels").selectAll("text")
          .data(pie(data), key);

        text.enter()
          .append("text")
          .attr("dy", ".35em")
          .attr("font-size","16px")
          .attr("fill","#b8b5b4")
          .text(function(d) {
            return d.data.label;
          });

        function midAngle(d){
          return d.startAngle + (d.endAngle - d.startAngle)/2;
        }
        
        // adjust text and line positions in order so they do not overlap
        var u= [0,0.6,1,0,0,0.5,1,1.6,2,0,0];

        text.transition().duration(1000)
          .attrTween("transform", function(d,i) {
            this._current = this._current || d;
            var interpolate = d3.interpolate(this._current, d);
            this._current = interpolate(0);
            return function(t) {

              var d2 = interpolate(t);
              var pos = outerArc.centroid(d2);
              pos[0] = radius * (midAngle(d2) < Math.PI ? 1+(u[i]) : -1-(u[i]));

              return "translate("+ pos +")";
            };
          })
          .styleTween("text-anchor", function(d){
            this._current = this._current || d;
            var interpolate = d3.interpolate(this._current, d);
            this._current = interpolate(0);
            return function(t) {
              var d2 = interpolate(t);
              return midAngle(d2) < Math.PI ? "start":"end";
            };
          });

        text.exit()
          .remove();

        /* ------- SLICE TO TEXT POLYLINES -------*/

        var polyline = svg2.select(".lines").selectAll("polyline")
          .data(pie(data), key);

        polyline.enter()
          .append("polyline")
          .style("fill","none")
          .style("stroke","#b8b5b4");

        polyline.transition().duration(1000)
          .attrTween("points", function(d,i){
            this._current = this._current || d;
            var interpolate = d3.interpolate(this._current, d);
            this._current = interpolate(0);
            return function(t) {
              var d2 = interpolate(t);
              var pos = outerArc.centroid(d2);
              pos[0] = radius * 0.95 * (midAngle(d2) < Math.PI ? 1+(u[i]) : -1-(u[i]));
              return [arc.centroid(d2), outerArc.centroid(d2), pos];
            };			
          });

        polyline.exit()
          .remove();
      }; 
      function colorData (val){
        //define label as the domain of colour
        var labels = color.domain();
        //value to get array index
        var ind=-1;
        //mapp the value of the data to the colour label to lock country colour and value to each other
        return labels.map(function(label){
          ind++
          return { label: label, value: val[ind]}

        });
      }; 
      function change2(data) {
        
        /* ------- PIE SLICES -------*/
        var slice = svg3.select(".slices2")
                         .selectAll("path.slice2")
                         .data(pie2(data), key)
        
       

        slice.enter()
          .insert("path")
          .attr("class", "slice2")
          .on("mouseover", mouseover2)
    			.on("mouseout", mouseout2)	
          .style("fill", function(d) { 

          return color(d.data.label); })
          .attr("stroke","black")
          .attr("stroke-width",6)
          .on("click", up11);

        slice		
          .transition()
           <!--add ease style->
          .ease( d3.easeElastic) 
          .duration(1000)
          .attrTween("d", function(d) {
            this._current = this._current || d;
            var interpolate = d3.interpolate(this._current, d);
            this._current = interpolate(0);
            return function(t) {
              return arc2(interpolate(t));
            };
          })
          
  

        slice.exit()
          .remove();

    
        /* ------- TEXT LABELS -------*/

        var text = svg3.select(".labels2").selectAll("text")
          .data(pie2(data), key);



                 
// Add a label to the larger arcs, translated to the arc centroid and rotated.
	  // source: http://bl.ocks.org/1305337#index.html
	  text.enter()
    
        .filter(function(d) { return d.endAngle - d.startAngle > .2; })
	  		.append("text")
	      .attr("dy", ".35em")
        .attr('id',function(d,i){return 'tex'+i})
        .attr("font-size","14px")
	      .attr("text-anchor", "middle")
        .attr("fill",butCol)
        .attr('font-weight',600)
	      .attr("transform", function(d) { return "translate(" + arc2.centroid(d) + ")rotate(" + angle(d) + ")"; })
	      //.text(function(d) { return formatAsPercentage(d.value); })
	      .text(function(d) { return d.data.label; })
	      ;
	   
	   // Computes the label angle of an arc, converting from radians to degrees.
		function angle(d) {
		    var a = (d.startAngle + d.endAngle) * 90 / Math.PI - 90;
		    return a > 90 ? a - 180 : a;
		}
  
          
          
           // Pie chart title===========================			
		svg3.append("svg:text")
	     	.attr("dy", ".35em")
	      .attr("text-anchor", "middle")
	      .text("AGE GROUP")
        .style('fill','#e7e1ed')
	      .attr("class","title");	
     

  
     	//HOVER MOVMENTS=================================	
	function mouseover2() {
  
	  d3.select(this).transition()
	      .duration(750)
	        		.attr("stroke","#ffa514")
              .attr("stroke-width","3px");
	          //  .style("d", outerArc2)
            //    d3.selectAll(".sq").remove();	
	}	
	function mouseout2() {
	  d3.select(this).transition()
	      .duration(750)
	        		.attr("stroke","black")
              .attr("stroke-width","6px");
	        	
	    // 		.style("d", outerArc)
	        		
	}
 
  
	// UPDATE ANY FUNCTION===========================
	function up11(d, i) {
  
   let a=i.index
   getAge( a); 
   
        
   d3.select(this).attr("id","cikk"+a).transition()
	      .duration(2000)     
	      .style("fill", 'orange');
        
       
        
      if(a==0){
       d3.selectAll('#tex0').style('fill','black')
       d3.selectAll('#tex1').style('fill',butCol)
       d3.selectAll('#tex2').style('fill',butCol)
       d3.selectAll("#cikk1").style("fill", "url(#svgGradient2)")
       d3.selectAll("#cikk2").style("fill", "url(#svgGradient3)")
      }        
        if(a==1){
       d3.selectAll('#tex1').style('fill','black')
       d3.selectAll('#tex0').style('fill',butCol)
       d3.selectAll('#tex2').style('fill',butCol)
       d3.selectAll("#cikk0").style("fill", "url(#svgGradient1)")
       d3.selectAll("#cikk2").style("fill", "url(#svgGradient3)")
      } 
        if(a==2){
       d3.selectAll('#tex2').style('fill','black')
       d3.selectAll('#tex0').style('fill',butCol)
       d3.selectAll('#tex1').style('fill',butCol)
       d3.selectAll("#cikk0").style("fill", "url(#svgGradient1)")
       d3.selectAll("#cikk1").style("fill", "url(#svgGradient2)")
      }
   	 
  	}
  
  
   };
      function furtherStudy(data){




var rootNode = d3.hierarchy(data)


rootNode.sum(function(d) {   return d.value;    });

packLayout(rootNode);

var nodes4 = d3.select('svg g')
  .selectAll('g')
  .data(rootNode.descendants())
  .join('g')
  .attr('transform', function(d) {return 'translate(' + [(d.x+1845), (d.y+1260)] + ')'})

nodes4
  .append('circle')
  .attr('class','rem')
  .style("stroke", "grey")
  .style("stroke-width",2)
  .style("fill",function(d,i) {return color3(i*0.09)})
   .on("mouseover", mouseover) // What to do when hovered
   .on("mousemove",  mousemove)
   .on("mouseleave", mouseleave)
  .transition() 
   <!--time-->
  .duration(1000)
  .attr('r', function(d) { return d.r; })
 
  
  
 
 //==================================TEXT TOOLTIP=====================================
  // create a tooltip
  var Tooltip = d3.select("#my_dataviz")
        .append("div")
        .style("opacity", 0)
        .attr("class", "tooltip")
        .attr("id","tool")
        .style("background-color", "white")
        .style("border", "solid")
        .style("border-width", "2px")
        .style("border-radius", "5px")
        .style("padding", "5px")  
        .style('width','120px')
        
        
  // Three function that change the tooltip when user hover / move / leave a cell
  function mouseover(d,i) {
  
   d3.select(this) 
     .style("stroke","black")
     //<!--make it smooth the transition-->
     .style("stroke-width",6)
    Tooltip
      .style("opacity", 1)
  }
  function  mousemove(d,i) { 
  
      d3.select(this) 
       
        .attr('width',function(d,i){
        
        
         
           people= d.value;
         
         	Tooltip.html('<u>' + d.data.name + '</u>' + "<br>" + " enrolled - "+ people.toFixed(0) )
                
      
                 
                  <!--makes sure that the text follows the mouse cursor-->
           var f = document.getElementById('tool');
			     document.addEventListener('mousemove', function(ev){  
               
             
 		           f.style.transform = 'translateY('+(ev.clientY-600)+'px)';
           
   		         f.style.transform += 'translateX('+ev.clientX+'px)';
		         	},true);
                 
               
  }) }
  function  mouseleave(d,i) {
  
  d3.select(this)
          .style("stroke","grey")
         .style("stroke-width",2)
                 
  
    Tooltip
      .style("opacity", 0)
  }
  
  
  }
  
      function load(ag,t,gen){
     
         // format the data
      chart2=[];
      graph.forEach(function(d) {
      if(d.AgeBand==age[ag] & d.Gender==gender2[gen] & d.time_period==time2[t]){

             total=d.NumberOfLearners*0.01;
             study=total*d.LearnOnlyPercent;
             work=total*d.EmpOnlyPercent;
             wostu=total*d.EmpAndLearnPercent;
             benf=total*d.BenefitPercent;
             fail=total*d.NotSustainedPercent;
             und=total*d.NoDestPercent;

             chart2.push(study,work,wostu,benf,fail,und);
        }
          
  });};  
      function load2(ag,t,gen){
      
         // format the data
      chart=[];
      graph2.forEach(function(d) {

      if( d.sex==gender[gen] & d.year==time[t]){


             chart.push(d.study1,d.study2,d.study3);
        }
          
  });};
      function load3(ag,t,gen){
     
         // format the data group fill d.profession   radius d.total_enrolments/ subject
      var data1=[];
      var data2=[];
      var data3=[];
      var data4=[];
  
      graph3.forEach(function(d) {
          if(d.profession==prof[0]){

            if(d.age_g==age3[ag] & d.sex==gender[gen] & d.time_period==time3[t]){
                        
                       data1.push({"name":d.ssa_t1_desc,"value":(d.tot_enr*d.total_enrolments_percent*0.01)},)  

                       }
                }
                
           if(d.profession==prof[1]){

            if(d.age_g==age3[ag] & d.sex==gender[gen] & d.time_period==time3[t]){
                      
                       data2.push({"name":d.ssa_t1_desc,"value":(d.tot_enr*d.total_enrolments_percent*0.01)},)  

                       }
                }
                
              if(d.profession==prof[2]){

            if(d.age_g==age3[ag] & d.sex==gender[gen] & d.time_period==time3[t]){

                       data3.push({"name":d.ssa_t1_desc,"value":(d.tot_enr*d.total_enrolments_percent*0.01)},)  

                       }
                }
         })
     
       data4=[{ "name":prof[0],"children": data1},{ "name":prof[1],"children": data2},{ "name":prof[2],"children": data3}];
    
      
      
      
      data={"name": "Further Studies","children": data4}
  ;} 
	


//============================BUTTON FUNCTIONS===========================

      function buttons(){   
      
      
            svg2.append("circle")
                .attr('fill','black')
                .attr("cx", 0)
                .attr("cy", -190)
                .attr("r", 20);
                
            svg2.append("circle")
                .attr('fill','black')
                .attr("cx", 100)
                .attr("cy", -190)
                .attr("r", 20);
                
            svg2.append("circle")
                .attr('fill','black')
                .attr("cx", 200)
                .attr("cy", -190)
                .attr("r", 20);
                
            svg2.append("circle")
                .attr('fill','black')
                .attr("cx", 300)
                .attr("cy", -190)
                .attr("r", 20);
                
           svg2.append("circle")
               .attr('fill','black')
               // .attr('opacity',0.3)
                .attr("cx", -400)
                .attr("cy", -220)
                .attr("r", 105);
                
            svg2.append("circle")
                .attr('fill','#3b3939')
               // .attr('opacity',0.3)
                .attr("cx", -400)
                .attr("cy", -220)
                .attr("r", 45);
                
         
                //hide some loading text but make it dissapear on data load at onMouse
                svg2.append("rect")       
                     <!--give the with and the height keep adjustable parameters-->
                    .attr("transform", "translate(100,0)")
                    .attr("class","sq")
                    .attr('x','-200px')
                    .attr('y', '-75px') 
                    .attr('width', 250)
                    .attr('height', 150)
                    <!--colour it add edge-->
                    .style("fill",  "#3b3939")
                    
                    

                // 2016====================================
                svg2.append("circle")  
                     <!--give the with and the height keep adjustable parameters-->
                    .style('cx',  '0px')
                    .style('cy', '-190px') 
                    .attr("class","c1")
                    <!--add radious-- >
                    .attr('r', 10)  
                    <!--colour it add edge-->
                    .style("fill", "url(#svgGradient)")
                    .style("stroke", "grey")
                    <!--make it smooth the transition-->
                    .style("stroke-width",1)
                    <!--Add listener for the mouseover event-->
                    .on("mouseover", onMouseOver)
                     <!--Add listener for the mouseout event-->
                    .on("mouseout", onMouseOut)  
                    //on click change data to wealth
                    .on("click",up1);

              svg2.append("text")  
                  <!-- text positions-->
                  .attr("transform", "translate(110,-160)")     
                  .attr('x',  -125)
                  .attr('y', 14)  
                  <!--colour it add edge-->
                  .style("fill", "White")
                  .text("2016");
              // 2017===================================
              svg2.append("circle")       
                   <!--give the with and the height keep adjustable parameters-->
                  .style('cx',  '100px')
                  .style('cy', '-190px') 
                  .attr("class","c2")
                  <!--add radious-- >
                  .attr('r', 10)  
                  <!--colour it add edge-->
                  .style("fill", "url(#svgGradient)")
                  <!--outline-->
                  .style("stroke", "grey")
                  <!--outline width-->
                  .style("stroke-width",1)
                  <!--Add listener for the mouseover event-->
                  .on("mouseover", onMouseOver)
                  <!--Add listener for the mouseout event-->
                  .on("mouseout", onMouseOut)  
                  //on click change data to population
                  .on("click",up2);

             d3.selectAll(svg2)
                   //ceate svg group
                   .append("g") 
                   //give its position
                   .attr("transform", "translate(720,-45)")
                   .append("text")     
                  .attr('x', -640)
                  .attr('y', -100)  
                  <!--colour it-->
                  .style("fill", "White")
                  .text("2017");
                  
           // 2018===================================
              svg2.append("circle")       
                   <!--give the with and the height keep adjustable parameters-->
                  .style('cx',  '200px')
                  .style('cy', '-190px') 
                  .attr("class","c3")
                  <!--add radious-- >
                  .attr('r', 10)  
                  <!--colour it add edge-->
                  .style("fill", "url(#svgGradient)")
                  <!--outline-->
                  .style("stroke", "grey")
                  <!--outline width-->
                  .style("stroke-width",1)
                  <!--Add listener for the mouseover event-->
                  .on("mouseover", onMouseOver)
                  <!--Add listener for the mouseout event-->
                  .on("mouseout", onMouseOut)  
                  //on click change data to population
                  .on("click",up3);

             d3.selectAll(svg2)
                   //ceate svg group
                   .append("g") 
                   //give its position
                   .attr("transform", "translate(820,-45)")
                   .append("text")     
                  .attr('x', -640)
                  .attr('y', -100)  
                  <!--colour it-->
                  .style("fill", "White")
                  .text("2018");
                  
                  
          // 2019===================================
          svg2.append("circle")       
                   <!--give the with and the height keep adjustable parameters-->
                  .style('cx',  '300px')
                  .style('cy', '-190px') 
                  .attr("class","c4")
                  <!--add radious-- >
                  .attr('r', 10)  
                  <!--colour it add edge-->
                  .style("fill", "url(#svgGradient)")
                  <!--outline-->
                  .style("stroke", "grey")
                  <!--outline width-->
                  .style("stroke-width",1)
                  <!--Add listener for the mouseover event-->
                  .on("mouseover", onMouseOver)
                  <!--Add listener for the mouseout event-->
                  .on("mouseout", onMouseOut)  
                  //on click change data to population
                  .on("click",up4);

             d3.selectAll(svg2)
                   //ceate svg group
                   .append("g") 
                   //give its position
                   .attr("transform", "translate(920,-45)")
                   .append("text")     
                  .attr('x', -640)
                  .attr('y', -100)  
                  <!--colour it-->
                  .style("fill", "White")
                  .text("2019");
                  
                 // return upDate();

          
        
//==========================Animate Buttons=======================================
 <!---------------mouseover event handler function for button---------------------->   
      function onMouseOver(d, i) { 
       
       d3.selectAll(".c1")
        <!--add animation-->
              .transition() 
              <!--time-->
              .duration(1000) 
            .style("fill", "#3b3939")
                     //make the other inactive
          d3.selectAll(".c2")
           <!--add animation-->
              .transition() 
              <!--time-->
              .duration(1000) 
            .style("fill", "#3b3939")
          d3.selectAll(".c3")
           <!--add animation-->
              .transition() 
              <!--time-->
              .duration(1000) 
            .style("fill", "#3b3939")
          d3.selectAll(".c4")
           <!--add animation-->
              .transition() 
              <!--time-->
              .duration(1000) 
            .style("fill", "#3b3939")
              
              <!--select buttons-->
              d3.select(this) 
              <!--add animation-->
              .transition() 
              <!--time-->
              .duration(1000) 
              <!--change size-->
              .attr('r',15 ) 
               <!--colour it -->
              .style("fill", "url(#svgGradient)")

      } 
  <!-----------------mouseout event handler function for button---------------------> 
      function onMouseOut(d, i) { 
              

              d3.select(this) 
                 <!--adds animation -->
                .transition()
                 <!--time-->
                .duration(1000) 
                <!--change size-->
                .attr('r',10 ) 
                 <!--colour it -->
                 .style("fill", "url(#svgGradient)")
                
                

      } 
      function up1(d,i) {

          d3.select(this)
           // colour it white
            .style("fill", "#a0a19c")
          //make the other inactive
          d3.selectAll(".c2")
            .style("fill", "#3d3b3a")
          d3.selectAll(".c3")
            .style("fill", "#3d3b3a")
          d3.selectAll(".c4")
            .style("fill", "#3d3b3a")
         		 
    
            
            getTime(0);
            }		   
      function up2(d,i) {
   
          d3.select(this)
            .style("fill", "#a0a19c")
          d3.selectAll(".c1")
            .style("fill", "#3d3b3a") 
          d3.selectAll(".c3")
            .style("fill", "#3d3b3a")
          d3.selectAll(".c4")
            .style("fill", "#3d3b3a")
        
         
            getTime(1);
           }           
      function up3(d,i) {

            <!--select button-->
          d3.select(this)
           // colour it white
            .style("fill", "#a0a19c")
          //make the other inactive
          d3.selectAll(".c1")
            .style("fill", "#3d3b3a")
          d3.selectAll(".c2")
            .style("fill", "#3d3b3a")
          d3.selectAll(".c4")
            .style("fill", "#3d3b3a")
       
           
            getTime(2);
            
           }   
      function up4(d,i) {
       
            <!--select button-->
          d3.select(this)
           // colour it white
            .style("fill", "#a0a19c")
          //make the other inactive
          d3.selectAll(".c1")
            .style("fill", "#3d3b3a")
          d3.selectAll(".c2")
            .style("fill", "#3d3b3a")
          d3.selectAll(".c3")
            .style("fill", "#3d3b3a")  
     
       
            getTime(3);
            
            }
 } 
      buttons(); 
     
 
       
//==========================UPDATE FROM EXTERNAL=========================
      function getTime(ti){
       t=ti;
        load(ag,t,gen);
        load2(ag,t,gen);
        load3(ag,t,gen);
            d3.selectAll('.rem') .transition()
              .duration(999).attr('r',0).remove()  
            //make sure you remove cover square
             d3.selectAll(".sq").remove()	
              
             d3.selectAll("#tool").remove()	
             d3.selectAll("#women").transition()
              .duration(999).attr('stroke','grey')
            furtherStudy(data);
         //   dsPieChart(dataset)
            change2(colorData(chart));
            //initialise chart
            change(colorData2(chart2));
     
      }      
      function getAge(it){
       ag=it;
       load(ag,t,gen);
       load2(ag,t,gen);
       load3(ag,t,gen);
       
           d3.selectAll('.rem') .transition()
         .duration(999).attr('r',0).remove() 
         
           //make sure you remove cover square
          d3.selectAll(".sq").remove()	
          
          d3.selectAll("#tool").remove()	
          d3.selectAll("#women").transition()
              .duration(999).attr('stroke','#c4aed4')
            furtherStudy(data);
        //    dsPieChart(dataset)
            change2(colorData(chart));
            //initialise chart
            change(colorData2(chart2));
            

 }

                  //hide some loading text but make it dissapear on data load at onMouse
                svg3.append("rect")       
                     <!--give the with and the height keep adjustable parameters-->
                    .attr("transform", "translate(100,0)")
                    .attr("class","sq")
                    .attr('x','-500px')
                    .attr('y', '-200px') 
                    .attr('width', 620)
                    .attr('height', 620)
                    <!--colour it add edge-->
                    .style("fill",  "#3b3939")
  

  })   }) });
     </script>
  </body>
</html> 
